import e,{memo as o,useState as l,useMemo as t,useEffect as n,useLayoutEffect as r}from"react";import{useAtom as a,atom as i,createStore as s,Provider as d}from"jotai";function c(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return e?e.filter((function(e){return!!e})).join(" "):""}var u=function(){return u=Object.assign||function(e){for(var o,l=1,t=arguments.length;l<t;l++)for(var n in o=arguments[l])Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);return e},u.apply(this,arguments)};function v(e,o,l){if(l||2===arguments.length)for(var t,n=0,r=o.length;n<r;n++)!t&&n in o||(t||(t=Array.prototype.slice.call(o,0,n)),t[n]=o[n]);return e.concat(t||Array.prototype.slice.call(o))}"function"==typeof SuppressedError&&SuppressedError;var m=20;function _(e){void 0===e&&(e=0);for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];return e<=m-1?o[e]?o[e]:_.apply(void 0,v([e+1],o,!1)):void 0}function h(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return _.apply(void 0,v([1],e,!1))}var b=o((function(o){return e.createElement("div",{onClick:o.onChange,className:c("am_input--checkbox am_input__checkbox--root",o.checked?"am_input__checkbox--checked":"")},e.createElement("div",{className:"am_input__checkbox--check"},e.createElement("div",{className:"am_input__checkbox__check--inner"})))}),(function(e,o){return e.checked===o.checked})),f=o((function(o){return e.createElement("div",null,e.createElement("div",null))}),(function(e,o){return e.value===o.value}));var p=o((function(o){return e.createElement("div",null,e.createElement("div",null))}),(function(e,o){return e.value===o.value}));var w=o((function(o){return e.createElement("div",null,e.createElement("div",null))}),(function(e,o){return e.value===o.value}));var C=o((function(o){return e.createElement("div",null,e.createElement("div",null))}),(function(e,o){return e.value===o.value}));var E=o((function(o){var t,n=a(o.column)[0],r=a(o.row)[0],i=l(o.value),s=i[0],d=i[1],c=null===(t=n.editable)||void 0===t?void 0:t.onChange,u={value:s,column:n,row:r},v=function(){c&&c(u),o.onFinish()};return e.createElement("div",{className:"am_input--text am_input__text--root"},e.createElement("input",{type:"text",onChange:function(e){var o;return d(null!==(o=e.target.value)&&void 0!==o?o:"")},onBlur:function(){return v()},onKeyDown:function(e){["Enter","NumpadEnter"].includes(e.code)&&v()},className:"am_input__text--input",value:s}))}),(function(e,o){return e.value===o.value})),g=o((function(o){var t,n,r,i,s,d=a(o.column)[0],c=a(o.row)[0],u=c[d.name],v=l(!1),m=v[0],_=v[1],h=function(){return _(!1)},b={value:u,row:c,column:d},g=d.render?d.render(b):u;return m?e.createElement("div",{className:"am_table__body__cell--editable"},"text"===(null===(t=d.editable)||void 0===t?void 0:t.type)?e.createElement(E,{value:u,column:o.column,row:o.row,onFinish:h}):null,"number"===(null===(n=d.editable)||void 0===n?void 0:n.type)?e.createElement(w,{value:u,column:o.column,row:o.row,onFinish:h}):null,"checkbox"===(null===(r=d.editable)||void 0===r?void 0:r.type)?e.createElement(f,{value:u,column:o.column,row:o.row,onFinish:h}):null,"date"===(null===(i=d.editable)||void 0===i?void 0:i.type)?e.createElement(p,{value:u,column:o.column,row:o.row,onFinish:h}):null,"select"===(null===(s=d.editable)||void 0===s?void 0:s.type)?e.createElement(C,{value:u,column:o.column,row:o.row,onFinish:h}):null):e.createElement("div",{onDoubleClick:function(){_(!0)}},g)}),(function(){return!0})),y=o((function(o){var l,t,n=a(o.row)[0],r=a(o.column)[0],i=a(o.atom.classes.cell.classes.root)[0],s=a(o.atom.classes.cell.overrideClasses.root)[0],d=n[r.name],u=o.atom.cell.onClick,v={value:d,row:n,column:r},m=r.render?r.render(v):d;return e.createElement("td",{style:{width:r.flex?"100% !important":null!==(l=r.width)&&void 0!==l?l:"fit-content",minWidth:r.width?r.width:r.minWidth,maxWidth:r.width?r.width:r.maxWidth},className:h(s,c(i,"am_table__body--cell am_table__body__cell--root")),onClick:function(){u&&u(v)}},(null===(t=r.editable)||void 0===t?void 0:t.enabled)?e.createElement(g,{atom:o.atom,columnIndex:o.columnIndex,rowIndex:o.rowIndex,column:o.column,row:o.row}):m)}),(function(){return!0})),k=o((function(o){var l=a(o.atom.columns)[0],n=a(o.atom.pagination.currentPage)[0],r=a(o.atom.pagination.itemsPerPage)[0];a(o.atom.row.indexing.label)[0];var s=a(o.atom.row.indexing.enabled)[0],d=a(o.atom.row.selection)[0],u=a(o.atom.classes.row.classes.root)[0],v=a(o.atom.classes.row.overrideClasses.root)[0],m=a(o.atom.classes.cell.classes.root)[0],_=a(o.atom.classes.cell.overrideClasses.root)[0],f=a(o.atom.idProperty)[0],p=a(o.atom.row.selected),w=p[0],C=p[1],E=a(t((function(){return i(o.row)}),[]))[0],g=E[f],k=d&&!!w[g],x=o.atom.row.onClick,N=r&&n&&[1,0].includes(n)?o.index+1+n*r:o.index+1,P=function(){if(d){var e=Object.assign({},w);k?delete e[g]:e[g]=o.row,C(e)}};return e.createElement("tr",{className:h(v,c(u,d?"am_table__body__row--selectable":void 0,k?"am_table__body__row--selected":void 0,"am_table__body--row am_table__body__row--root")),onClick:function(){x&&x(E),d&&P()}},d?e.createElement("td",{className:h(_,c(m,"am_table__body--cell am_table__body__cell--root am_table__body__cell--checkbox"))},e.createElement("div",{className:"am_table__body__cell__checkbox--root"},e.createElement(b,{checked:k,onChange:P,atom:o.atom}))):null,s?e.createElement("td",{className:h(_,c(m,"am_table__body--cell am_table__body__cell--root am_table__body__cell--row-number"))},e.createElement("div",{className:"am_table__body__cell__row-number--root"},N)):null,l.map((function(l,t){return e.createElement(y,{key:"body_row_cell_".concat(t),atom:o.atom,row:i(E),column:l,columnIndex:t,rowIndex:o.index})})))}),(function(){return!0})),x=o((function(o){var l=a(o.atom.data)[0],t=a(o.atom.pagination.currentPage)[0],n=a(o.atom.pagination.itemsPerPage)[0],r=a(o.atom.classes.body.classes.root)[0],i=a(o.atom.classes.body.overrideClasses.root)[0],s=n&&0!==n?l.slice(((null!=t?t:0)-1)*n,(null!=t?t:0)*n):l;return e.createElement("tbody",{className:h(i,c(r,"am_table__body am_table__body--root"))},s.map((function(l,t){return e.createElement(k,{key:"body_row_".concat(t),index:t,row:l,atom:o.atom})})))}),(function(){return!0}));function N(o){var l,t,n,r,a,i,s;return e.createElement("svg",{fill:null!==(l=o.color)&&void 0!==l?l:"none",width:null!==(t=o.width)&&void 0!==t?t:24,height:null!==(n=o.height)&&void 0!==n?n:24,viewBox:"0 0 ".concat(null!==(r=o.width)&&void 0!==r?r:24," ").concat(null!==(a=o.height)&&void 0!==a?a:24),strokeWidth:null!==(i=o.strokeWidth)&&void 0!==i?i:1,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:null!==(s=o.color)&&void 0!==s?s:"none"}),e.createElement("path",{d:"M12 5l0 14"}),e.createElement("path",{d:"M16 15l-4 4"}),e.createElement("path",{d:"M8 15l4 4"}))}function P(o){var l,t,n,r,a,i,s;return e.createElement("svg",{fill:null!==(l=o.color)&&void 0!==l?l:"none",width:null!==(t=o.width)&&void 0!==t?t:24,height:null!==(n=o.height)&&void 0!==n?n:24,viewBox:"0 0 ".concat(null!==(r=o.width)&&void 0!==r?r:24," ").concat(null!==(a=o.height)&&void 0!==a?a:24),strokeWidth:null!==(i=o.strokeWidth)&&void 0!==i?i:1,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:null!==(s=o.color)&&void 0!==s?s:"none"}),e.createElement("path",{d:"M12 5l0 14"}),e.createElement("path",{d:"M16 9l-4 -4"}),e.createElement("path",{d:"M8 9l4 -4"}))}function z(o){var l=a(o.atom.classes.headerCell.classes.resizeHandle.root)[0],t=a(o.atom.classes.headerCell.overrideClasses.resizeHandle.root)[0];return e.createElement("span",{onDrag:function(e){console.log(e)},className:h(t,c(l,"am_table__header__cell--resize-handle am_table__header__cell__resize-handle--root"))})}var W=o((function(o){var l,t=function(e){var o=a(e.atom.classes.headerCell.classes.root)[0],l=a(e.atom.classes.headerCell.overrideClasses.root)[0],t=a(e.atom.classes.headerCell.classes.content.root)[0],n=a(e.atom.classes.headerCell.overrideClasses.content.root)[0],r=a(e.atom.classes.headerCell.classes.sortBtn.root)[0],i=a(e.atom.classes.headerCell.overrideClasses.sortBtn.root)[0];return{classes:{root:o,content:t,sortBtn:r},overrideClasses:{root:l,content:n,sortBtn:i}}}(o),r=t.classes,i=t.overrideClasses,s=a(o.atom.data),d=s[0],v=s[1],m=a(o.column),_=m[0],b=m[1],f=a(o.atom.sort.defaultSortedColumn),p=f[0],w=f[1],C=a(o.atom.sort.defaultSortDirection),E=C[0],g=C[1],y=o.atom.header.cell.onClick;n((function(){var e,o;E&&p&&v((e=p,void 0===(o=E)&&(o="asc"),d.slice().sort((function(l,t){var n=l[e],r=t[e];return"asc"===o?n<r?-1:n>r?1:0:n>r?-1:n<r?1:0}))))}),[E,p]);return e.createElement("th",{style:{width:_.flex?"100% !important":null!==(l=_.width)&&void 0!==l?l:"fit-content",minWidth:_.width?_.width:_.minWidth,maxWidth:_.width?_.width:_.maxWidth},onClick:function(){p===_.name?g("asc"===E?"desc":"asc"):(w(_.name),g("asc")),y&&y(_,b)},className:h(i.root,c(r.root,"am_table__header--cell am_table__header__cell--root"))},e.createElement("div",{className:h(i.content,c(r.content,"am_table__header__cell--content"))},e.createElement("span",null,_.header),p===_.name&&e.createElement("div",{className:h(i.sortBtn,c(r.sortBtn,"am_table__header__cell--sort-btn"))},e.createElement("span",{className:"am_table__header__cell__sort-btn--arrows"},"asc"===E?e.createElement(N,{width:18,height:20}):e.createElement(P,{width:18,height:20})))),_.filterable?e.createElement(e.Fragment,null):null,e.createElement(z,u({},o)))}),(function(){return!0}));var B=o((function(o){var l,t=a(o.atom.data)[0],n=a(o.atom.idProperty)[0],r=a(o.atom.row.indexing.label)[0],i=a(o.atom.row.indexing.enabled)[0],s=a(o.atom.classes.header.classes.root)[0],d=a(o.atom.classes.header.overrideClasses.root)[0],u=a(o.atom.classes.headerRow.classes.root)[0],v=a(o.atom.classes.headerRow.overrideClasses.root)[0],m=a(o.atom.classes.headerCell.classes.root)[0],_=a(o.atom.classes.headerCell.overrideClasses.root)[0],f=a(o.atom.row.selection)[0],p=a(o.atom.row.selected),w=p[0],C=p[1],E=(l=o.atom,{columns:a(l.columns)[0],selection:a(l.row.selection)[0]}).columns,g=Object.keys(w).length===t.length;return e.createElement("thead",{className:h(d,c(s,"am_table__header am_table__header--root"))},e.createElement("tr",{className:h(v,c(u,"am_table__header--row am_table__header__row--root"))},f?e.createElement("th",{className:h(_,c(m,"am_table__header--cell am_table__header__cell--root am_table__header__cell--checkbox"))},e.createElement("div",{className:"am_table__header__cell__checkbox--root"},e.createElement(b,{checked:g,onChange:function(){if(g)C({});else{var e=Object.assign({},w);t.forEach((function(o){return e[o[n]]=o})),C(e)}},atom:o.atom}))):null,i?e.createElement("th",{className:h(_,c(m,"am_table__header--cell am_table__header__cell--root am_table__header__cell--row-number"))},e.createElement("div",{className:"am_table__header__cell__row-number--root"},r)):null,E.map((function(l,t){return e.createElement(W,{key:"header_cell_".concat(t),column:l,atom:o.atom,index:t})}))))}),(function(){return!0})),I=o((function(o){var l=a(o.atom.data)[0],t=a(o.atom.pagination.currentPage)[0],n=a(o.atom.pagination.itemsPerPage)[0],r=n&&0!==n?Math.ceil(l.length/n):1,i=1===t,s=1===t;return e.createElement("div",{className:"am_container__pagination"},e.createElement("button",{disabled:i},"قبل"),e.createElement("span",null,"صفحه ",t," از ",r),e.createElement("button",{disabled:s},"بعد"))}),(function(){return!0})),H={color:"--am__table-color",hover:"--am__table-hover-color",focus:"--am__table-focus-color",selected:"--am__table-selected-color",resizeHandle:"--am__table-resize-handle-color"};function M(e,o){if(e.startsWith("#")){e=e.slice(1);var l=parseInt(e.slice(0,2),16),t=parseInt(e.slice(2,4),16),n=parseInt(e.slice(4,6),16);return"rgba(".concat(l,", ").concat(t,", ").concat(n,", ").concat(o,")")}if(e.startsWith("rgb(")){var r=e.match(/(\d+),\s*(\d+),\s*(\d+)\)/);if(r){l=parseInt(r[1],10),t=parseInt(r[2],10),n=parseInt(r[3],10);return"rgba(".concat(l,", ").concat(t,", ").concat(n,", ").concat(o,")")}return e}return e}function S(e){var o=e.atom,l=a(o.color)[0];r((function(){l&&function(e){document.body.style.setProperty(H.color,e),document.body.style.setProperty(H.hover,M(e,.15)),document.body.style.setProperty(H.selected,M(e,.4)),document.body.style.setProperty(H.focus,M(e,.3)),document.body.style.setProperty(H.resizeHandle,"white")}(l)}),[l])}var j=o((function(o){var l=o.atom,t=a(l.rtl)[0],n=a(l.classes.table.classes.root)[0],r=a(l.classes.table.overrideClasses.root)[0],i=a(l.classes.container.classes.root)[0],s=a(l.classes.container.overrideClasses.root)[0],d=a(l.classes.wrapper.classes.root)[0],u=a(l.classes.wrapper.overrideClasses.root)[0],v=a(l.pagination.enabled)[0];return S({atom:l}),e.createElement("div",{className:h(s,c(i,"am_table__container",t?"am_rtl":""))},e.createElement("div",{className:h(u,c(d,"am_table__wrapper"))},e.createElement("table",{className:h(r,c(n,"am_table__table"))},e.createElement(B,{atom:l}),e.createElement(x,{atom:l}))),v?e.createElement(I,{atom:l}):null)}),(function(){return!0}));function F(e){var o;return{enabled:i(null!==(o=null==e?void 0:e.enabled)&&void 0!==o&&o),totalPages:i(null==e?void 0:e.totalPages),currentPage:i(null==e?void 0:e.currentPage),itemsPerPage:i(null==e?void 0:e.itemsPerPage)}}function R(e){var o;return{selection:i(null!==(o=null==e?void 0:e.selection)&&void 0!==o&&o),selected:i({}),onClick:null==e?void 0:e.onClick}}function D(e){return{onClick:null==e?void 0:e.onClick,onResize:null==e?void 0:e.onResize,width:i(null==e?void 0:e.width)}}function O(e){var o;return{selection:i(null!==(o=null==e?void 0:e.selection)&&void 0!==o&&o),selected:i({}),onSort:null==e?void 0:e.onSort,cell:D(null==e?void 0:e.cell)}}function L(e){var o,l,t,n,r;return{selected:i({}),selection:i(null!==(o=null==e?void 0:e.selection)&&void 0!==o&&o),onClick:null==e?void 0:e.onClick,classes:{root:i(null===(l=null==e?void 0:e.classes)||void 0===l?void 0:l.root)},overrideClasses:{root:i(null===(t=null==e?void 0:e.overrideClasses)||void 0===t?void 0:t.root)},indexing:{enabled:i(null===(n=null==e?void 0:e.indexing)||void 0===n?void 0:n.enabled),label:i(null===(r=null==e?void 0:e.indexing)||void 0===r?void 0:r.label)}}}function A(e){var o;return{defaultSortedColumn:i(null==e?void 0:e.defaultSortedColumn),defaultSortDirection:i(null!==(o=null==e?void 0:e.defaultSortDirection)&&void 0!==o?o:"asc")}}function K(e){var o,l,t,n,r,a,s,d,c,u,v,m,_,h,b,f,p,w,C,E,g,y,k,x,N,P,z,W,B,I,H,M,S,j,F,R,D,O,L,A,K,q,G,J,Q,T,U,V,X,Y,Z,$,ee,oe,le,te,ne,re;return{body:{classes:{root:i(null===(l=null===(o=null==e?void 0:e.body)||void 0===o?void 0:o.classes)||void 0===l?void 0:l.root)},overrideClasses:{root:i(null===(n=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.overrideClasses)||void 0===n?void 0:n.root)}},row:{classes:{root:i(null===(a=null===(r=null==e?void 0:e.row)||void 0===r?void 0:r.classes)||void 0===a?void 0:a.root)},overrideClasses:{root:i(null===(d=null===(s=null==e?void 0:e.row)||void 0===s?void 0:s.overrideClasses)||void 0===d?void 0:d.root)}},pagination:{classes:{root:i(null===(u=null===(c=null==e?void 0:e.pagination)||void 0===c?void 0:c.classes)||void 0===u?void 0:u.root)},overrideClasses:{root:i(null===(m=null===(v=null==e?void 0:e.pagination)||void 0===v?void 0:v.overrideClasses)||void 0===m?void 0:m.root)}},headerRow:{classes:{root:i(null===(h=null===(_=null==e?void 0:e.headerRow)||void 0===_?void 0:_.classes)||void 0===h?void 0:h.root)},overrideClasses:{root:i(null===(f=null===(b=null==e?void 0:e.headerRow)||void 0===b?void 0:b.overrideClasses)||void 0===f?void 0:f.root)}},headerCell:{classes:{root:i(null===(w=null===(p=null==e?void 0:e.headerCell)||void 0===p?void 0:p.classes)||void 0===w?void 0:w.root),resizeHandle:{root:i(null===(g=null===(E=null===(C=null==e?void 0:e.headerCell)||void 0===C?void 0:C.classes)||void 0===E?void 0:E.resizeHandle)||void 0===g?void 0:g.root)},content:{root:i(null===(x=null===(k=null===(y=null==e?void 0:e.headerCell)||void 0===y?void 0:y.classes)||void 0===k?void 0:k.content)||void 0===x?void 0:x.root)},sortBtn:{root:i(null===(z=null===(P=null===(N=null==e?void 0:e.headerCell)||void 0===N?void 0:N.classes)||void 0===P?void 0:P.sortBtn)||void 0===z?void 0:z.root)}},overrideClasses:{root:i(null===(B=null===(W=null==e?void 0:e.headerCell)||void 0===W?void 0:W.overrideClasses)||void 0===B?void 0:B.root),resizeHandle:{root:i(null===(M=null===(H=null===(I=null==e?void 0:e.headerCell)||void 0===I?void 0:I.overrideClasses)||void 0===H?void 0:H.resizeHandle)||void 0===M?void 0:M.root)},content:{root:i(null===(F=null===(j=null===(S=null==e?void 0:e.headerCell)||void 0===S?void 0:S.overrideClasses)||void 0===j?void 0:j.content)||void 0===F?void 0:F.root)},sortBtn:{root:i(null===(O=null===(D=null===(R=null==e?void 0:e.headerCell)||void 0===R?void 0:R.overrideClasses)||void 0===D?void 0:D.sortBtn)||void 0===O?void 0:O.root)}}},cell:{classes:{root:i(null===(A=null===(L=null==e?void 0:e.cell)||void 0===L?void 0:L.classes)||void 0===A?void 0:A.root)},overrideClasses:{root:i(null===(q=null===(K=null==e?void 0:e.cell)||void 0===K?void 0:K.overrideClasses)||void 0===q?void 0:q.root)}},header:{classes:{root:i(null===(J=null===(G=null==e?void 0:e.header)||void 0===G?void 0:G.classes)||void 0===J?void 0:J.root)},overrideClasses:{root:i(null===(T=null===(Q=null==e?void 0:e.header)||void 0===Q?void 0:Q.overrideClasses)||void 0===T?void 0:T.root)}},table:{classes:{root:i(null===(V=null===(U=null==e?void 0:e.table)||void 0===U?void 0:U.classes)||void 0===V?void 0:V.root)},overrideClasses:{root:i(null===(Y=null===(X=null==e?void 0:e.table)||void 0===X?void 0:X.overrideClasses)||void 0===Y?void 0:Y.root)}},container:{classes:{root:i(null===($=null===(Z=null==e?void 0:e.container)||void 0===Z?void 0:Z.classes)||void 0===$?void 0:$.root)},overrideClasses:{root:i(null===(oe=null===(ee=null==e?void 0:e.container)||void 0===ee?void 0:ee.overrideClasses)||void 0===oe?void 0:oe.root)}},wrapper:{classes:{root:i(null===(te=null===(le=null==e?void 0:e.wrapper)||void 0===le?void 0:le.classes)||void 0===te?void 0:te.root)},overrideClasses:{root:i(null===(re=null===(ne=null==e?void 0:e.wrapper)||void 0===ne?void 0:ne.overrideClasses)||void 0===re?void 0:re.root)}}}}function q(e){var o,l,t={};e.columns.forEach((function(e){return t[e.name]=e}));var n=s();return{atom:{columnsMap:i(t),idProperty:i(null!==(o=e.idProperty)&&void 0!==o?o:"id"),columns:i(e.columns.map((function(e){return i(e)}))),data:i(null!==(l=e.data)&&void 0!==l?l:[]),color:i(e.color),header:O(e.header),sort:A(e.sort),row:L(e.row),cell:R(e.cell),pagination:F(e.pagination),classes:K(e.classes),rtl:i(e.rtl)},store:n}}function G(o){var l=o.store,t=o.children;return e.createElement(e.Fragment,null,e.createElement(d,{store:l},t))}export{G as TableProvider,q as createAtoms,j as default};
//# sourceMappingURL=index.js.map

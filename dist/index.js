import e,{memo as o,useState as l,useMemo as t,useLayoutEffect as r}from"react";import{useAtom as n,atom as a,createStore as s,Provider as i}from"jotai";function d(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return e?e.filter((function(e){return!!e})).join(" "):""}var c=function(){return c=Object.assign||function(e){for(var o,l=1,t=arguments.length;l<t;l++)for(var r in o=arguments[l])Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);return e},c.apply(this,arguments)};function v(e,o,l){if(l||2===arguments.length)for(var t,r=0,n=o.length;r<n;r++)!t&&r in o||(t||(t=Array.prototype.slice.call(o,0,r)),t[r]=o[r]);return e.concat(t||Array.prototype.slice.call(o))}"function"==typeof SuppressedError&&SuppressedError;var u=20;function m(e){void 0===e&&(e=0);for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];return e<=u-1?o[e]?o[e]:m.apply(void 0,v([e+1],o,!1)):void 0}function _(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return m.apply(void 0,v([1],e,!1))}var h=o((function(o){var t=n(o.column)[0],r=n(o.row)[0],a=r[t.name],s=l(!1),i=s[0],d=s[1],c=l(a),v=c[0],u=c[1],m=o.atom.cell.onChange;return i?e.createElement("input",{type:"text",value:v,onChange:function(e){u(e.target.value)},onBlur:function(){m&&m({row:r,column:t},v),d(!1)}}):e.createElement("div",{onDoubleClick:function(){d(!0)}},a)}),(function(){return!0})),b=o((function(o){var l=n(o.row)[0],t=n(o.column)[0],r=n(o.atom.classes.cell.classes.root)[0],a=n(o.atom.classes.cell.overrideClasses.root)[0],s=l[t.name],i=o.atom.cell.onClick,c=o.atom.cell.onChange,v={value:s,row:l,column:t},u=t.render?t.render(v):s;return e.createElement("td",{className:_(a,d(r,"am_table__body--cell am_table__body__cell--root")),onClick:function(){i&&i(v)}},t.editable&&c?e.createElement(h,{atom:o.atom,columnIndex:o.columnIndex,rowIndex:o.rowIndex,column:o.column,row:o.row}):u)}),(function(){return!0})),C=o((function(o){var l=n(o.atom.columns)[0],r=n(o.atom.row.selection)[0],s=n(o.atom.row.editable)[0],i=n(o.atom.classes.row.classes.root)[0],c=n(o.atom.classes.row.overrideClasses.root)[0],v=t((function(){return s?o.row:a(o.row)}),[s]),u=n(v),m=u[0];u[1];var h=n(o.atom.idProperty)[0],C=n(o.atom.row.selected),f=C[0],p=C[1],w=m[h],g=r&&!!f[w],y=o.atom.row.onClick,E=function(){if(r){var e=Object.assign({},f);g?delete e[w]:e[w]=o.row,p(e)}};return e.createElement("tr",{className:_(c,d(i,r?"am_table__body__row--selectable":void 0,g?"am_table__body__row--selected":void 0,"am_table__body--row am_table__body__row--root")),onClick:function(){y&&y(m),r&&E()}},r?e.createElement("td",null,e.createElement("input",{type:"checkbox",checked:g,onChange:E})):null,l.map((function(l,t){return e.createElement(b,{key:"body_row_cell_".concat(t),atom:o.atom,row:a(m),column:l,columnIndex:t,rowIndex:o.index})})))}),(function(){return!0})),f=o((function(o){var l=n(o.atom.data)[0],t=n(o.atom.pagination.currentPage)[0],r=n(o.atom.pagination.itemsPerPage)[0],a=n(o.atom.classes.body.classes.root)[0],s=n(o.atom.classes.body.overrideClasses.root)[0],i=r&&0!==r?l.slice(((null!=t?t:0)-1)*r,(null!=t?t:0)*r):l;return e.createElement("tbody",{className:_(s,d(a,"am_table__body am_table__body--root"))},i.map((function(l,t){return e.createElement(C,{key:"body_row_".concat(t),index:t,row:l,atom:o.atom})})))}),(function(){return!0}));function p(o){var l=n(o.atom.classes.headerCell.classes.resizeHandle.root)[0],t=n(o.atom.classes.headerCell.overrideClasses.resizeHandle.root)[0];return e.createElement("span",{onDrag:function(e){console.log(e)},className:_(t,d(l,"am_table__header__cell--resize-handle am_table__header__cell__resize-handle--root"))})}var w=o((function(o){var l=function(e){var o=n(e.atom.classes.headerCell.classes.root)[0],l=n(e.atom.classes.headerCell.overrideClasses.root)[0],t=n(e.atom.classes.headerCell.classes.content.root)[0],r=n(e.atom.classes.headerCell.overrideClasses.content.root)[0],a=n(e.atom.classes.headerCell.classes.sortBtn.root)[0],s=n(e.atom.classes.headerCell.overrideClasses.sortBtn.root)[0];return{classes:{root:o,content:t,sortBtn:a},overrideClasses:{root:l,content:r,sortBtn:s}}}(o),t=l.classes,r=l.overrideClasses,a=n(o.column),s=a[0],i=a[1],v=n(o.atom.sort.defaultSortedColumn),u=v[0],m=v[1],h=n(o.atom.sort.defaultSortDirection),b=h[0],C=h[1],f=o.atom.header.cell.onClick;return e.createElement("th",{style:{width:s.flex?"100% !important":s.width,minWidth:s.width?s.width:s.minWidth,maxWidth:s.width?s.width:s.maxWidth},onClick:function(){f&&f(s,i)},className:_(r.root,d(t.root,"am_table__header--cell am_table__header__cell--root"))},e.createElement("div",{className:_(r.content,d(t.content,"am_table__header__cell--content"))},s.header),s.filterable?e.createElement(e.Fragment,null):null,u===s.name&&e.createElement("div",{onClick:function(e){e.stopPropagation(),u===s.name?C("asc"===b?"desc":"asc"):(m(s.name),C("asc"))},className:_(r.sortBtn,d(t.sortBtn,"am_table__header__cell--sort-btn"))},e.createElement("span",null,"asc"===b?"↑":"↓")),e.createElement(p,c({},o)))}),(function(){return!0})),g=o((function(o){var l=n(o.atom.columns)[0],t=n(o.atom.classes.header.classes.root)[0],r=n(o.atom.classes.header.overrideClasses.root)[0],a=n(o.atom.classes.headerRow.classes.root)[0],s=n(o.atom.classes.headerRow.overrideClasses.root)[0];return e.createElement("thead",{className:_(r,d(t,"am_table__header am_table__header--root"))},e.createElement("tr",{className:_(s,d(a,"am_table__header--row am_table__header__row--root"))},l.map((function(l,t){return e.createElement(w,{key:"header_cell_".concat(t),column:l,atom:o.atom,index:t})}))))}),(function(){return!0})),y=o((function(o){var l=n(o.atom.data)[0],t=n(o.atom.pagination.currentPage)[0],r=n(o.atom.pagination.itemsPerPage)[0],a=r&&0!==r?Math.ceil(l.length/r):1,s=1===t,i=1===t;return e.createElement("div",{className:"am_container__pagination"},e.createElement("button",{disabled:s},"قبل"),e.createElement("span",null,"صفحه ",t," از ",a),e.createElement("button",{disabled:i},"بعد"))}),(function(){return!0})),E={color:"--am__table-color",hover:"--am__table-hover-color",selected:"--am__table-selected-color",resizeHandle:"--am__table-resize-handle-color"};function P(e,o){if(e.startsWith("#")){e=e.slice(1);var l=parseInt(e.slice(0,2),16),t=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16);return"rgba(".concat(l,", ").concat(t,", ").concat(r,", ").concat(o,")")}if(e.startsWith("rgb(")){var n=e.match(/(\d+),\s*(\d+),\s*(\d+)\)/);if(n){l=parseInt(n[1],10),t=parseInt(n[2],10),r=parseInt(n[3],10);return"rgba(".concat(l,", ").concat(t,", ").concat(r,", ").concat(o,")")}return e}return e}function k(e){var o=e.atom,l=n(o.color)[0];r((function(){l&&function(e){document.body.style.setProperty(E.color,e),document.body.style.setProperty(E.hover,P(e,.15)),document.body.style.setProperty(E.selected,P(e,.4)),document.body.style.setProperty(E.resizeHandle,"white")}(l)}),[l])}var x=o((function(o){var l=o.atom,t=n(l.classes.table.classes.root)[0],r=n(l.classes.table.overrideClasses.root)[0],a=n(l.classes.container.classes.root)[0],s=n(l.classes.container.overrideClasses.root)[0],i=n(l.classes.wrapper.classes.root)[0],c=n(l.classes.wrapper.overrideClasses.root)[0],v=n(l.pagination.enabled)[0];return k({atom:l}),e.createElement("div",{className:_(s,d(a,"am_table__container"))},e.createElement("div",{className:_(c,d(i,"am_table__wrapper"))},e.createElement("table",{className:_(r,d(t,"am_table__table"))},e.createElement(g,{atom:l}),e.createElement(f,{atom:l}))),v?e.createElement(y,{atom:l}):null)}),(function(){return!0}));function z(e){var o;return{enabled:a(null!==(o=null==e?void 0:e.enabled)&&void 0!==o&&o),totalPages:a(null==e?void 0:e.totalPages),currentPage:a(null==e?void 0:e.currentPage),itemsPerPage:a(null==e?void 0:e.itemsPerPage)}}function N(e){var o,l;return{editable:a(null!==(o=null==e?void 0:e.editable)&&void 0!==o&&o),selection:a(null!==(l=null==e?void 0:e.selection)&&void 0!==l&&l),selected:a({}),onClick:null==e?void 0:e.onClick,onChange:null==e?void 0:e.onChange}}function I(e){return{onClick:null==e?void 0:e.onClick,onResize:null==e?void 0:e.onResize,width:a(null==e?void 0:e.width)}}function B(e){var o;return{selection:a(null!==(o=null==e?void 0:e.selection)&&void 0!==o&&o),selected:a({}),onSort:null==e?void 0:e.onSort,cell:I(null==e?void 0:e.cell)}}function S(e){var o,l,t,r,n,s;return{editable:a(null!==(o=null==e?void 0:e.editable)&&void 0!==o&&o),selected:a({}),selection:a(null!==(l=null==e?void 0:e.selection)&&void 0!==l&&l),onClick:null==e?void 0:e.onClick,classes:{root:a(null===(t=null==e?void 0:e.classes)||void 0===t?void 0:t.root)},overrideClasses:{root:a(null===(r=null==e?void 0:e.overrideClasses)||void 0===r?void 0:r.root)},indexing:{enabled:a(null===(n=null==e?void 0:e.indexing)||void 0===n?void 0:n.enabled),label:a(null===(s=null==e?void 0:e.indexing)||void 0===s?void 0:s.label)}}}function H(e){var o;return{defaultSortedColumn:a(null==e?void 0:e.defaultSortedColumn),defaultSortDirection:a(null!==(o=null==e?void 0:e.defaultSortDirection)&&void 0!==o?o:"asc")}}function R(e){var o,l,t,r,n,s,i,d,c,v,u,m,_,h,b,C,f,p,w,g,y,E,P,k,x,z,N,I,B,S,H,R,W,j,D,O,A,F,M,q,G,J,K,L,Q,T,U,V,X,Y,Z,$,ee,oe,le,te,re,ne;return{body:{classes:{root:a(null===(l=null===(o=null==e?void 0:e.body)||void 0===o?void 0:o.classes)||void 0===l?void 0:l.root)},overrideClasses:{root:a(null===(r=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.overrideClasses)||void 0===r?void 0:r.root)}},row:{classes:{root:a(null===(s=null===(n=null==e?void 0:e.row)||void 0===n?void 0:n.classes)||void 0===s?void 0:s.root)},overrideClasses:{root:a(null===(d=null===(i=null==e?void 0:e.row)||void 0===i?void 0:i.overrideClasses)||void 0===d?void 0:d.root)}},pagination:{classes:{root:a(null===(v=null===(c=null==e?void 0:e.pagination)||void 0===c?void 0:c.classes)||void 0===v?void 0:v.root)},overrideClasses:{root:a(null===(m=null===(u=null==e?void 0:e.pagination)||void 0===u?void 0:u.overrideClasses)||void 0===m?void 0:m.root)}},headerRow:{classes:{root:a(null===(h=null===(_=null==e?void 0:e.headerRow)||void 0===_?void 0:_.classes)||void 0===h?void 0:h.root)},overrideClasses:{root:a(null===(C=null===(b=null==e?void 0:e.headerRow)||void 0===b?void 0:b.overrideClasses)||void 0===C?void 0:C.root)}},headerCell:{classes:{root:a(null===(p=null===(f=null==e?void 0:e.headerCell)||void 0===f?void 0:f.classes)||void 0===p?void 0:p.root),resizeHandle:{root:a(null===(y=null===(g=null===(w=null==e?void 0:e.headerCell)||void 0===w?void 0:w.classes)||void 0===g?void 0:g.resizeHandle)||void 0===y?void 0:y.root)},content:{root:a(null===(k=null===(P=null===(E=null==e?void 0:e.headerCell)||void 0===E?void 0:E.classes)||void 0===P?void 0:P.content)||void 0===k?void 0:k.root)},sortBtn:{root:a(null===(N=null===(z=null===(x=null==e?void 0:e.headerCell)||void 0===x?void 0:x.classes)||void 0===z?void 0:z.sortBtn)||void 0===N?void 0:N.root)}},overrideClasses:{root:a(null===(B=null===(I=null==e?void 0:e.headerCell)||void 0===I?void 0:I.overrideClasses)||void 0===B?void 0:B.root),resizeHandle:{root:a(null===(R=null===(H=null===(S=null==e?void 0:e.headerCell)||void 0===S?void 0:S.overrideClasses)||void 0===H?void 0:H.resizeHandle)||void 0===R?void 0:R.root)},content:{root:a(null===(D=null===(j=null===(W=null==e?void 0:e.headerCell)||void 0===W?void 0:W.overrideClasses)||void 0===j?void 0:j.content)||void 0===D?void 0:D.root)},sortBtn:{root:a(null===(F=null===(A=null===(O=null==e?void 0:e.headerCell)||void 0===O?void 0:O.overrideClasses)||void 0===A?void 0:A.sortBtn)||void 0===F?void 0:F.root)}}},cell:{classes:{root:a(null===(q=null===(M=null==e?void 0:e.cell)||void 0===M?void 0:M.classes)||void 0===q?void 0:q.root)},overrideClasses:{root:a(null===(J=null===(G=null==e?void 0:e.cell)||void 0===G?void 0:G.overrideClasses)||void 0===J?void 0:J.root)}},header:{classes:{root:a(null===(L=null===(K=null==e?void 0:e.header)||void 0===K?void 0:K.classes)||void 0===L?void 0:L.root)},overrideClasses:{root:a(null===(T=null===(Q=null==e?void 0:e.header)||void 0===Q?void 0:Q.overrideClasses)||void 0===T?void 0:T.root)}},table:{classes:{root:a(null===(V=null===(U=null==e?void 0:e.table)||void 0===U?void 0:U.classes)||void 0===V?void 0:V.root)},overrideClasses:{root:a(null===(Y=null===(X=null==e?void 0:e.table)||void 0===X?void 0:X.overrideClasses)||void 0===Y?void 0:Y.root)}},container:{classes:{root:a(null===($=null===(Z=null==e?void 0:e.container)||void 0===Z?void 0:Z.classes)||void 0===$?void 0:$.root)},overrideClasses:{root:a(null===(oe=null===(ee=null==e?void 0:e.container)||void 0===ee?void 0:ee.overrideClasses)||void 0===oe?void 0:oe.root)}},wrapper:{classes:{root:a(null===(te=null===(le=null==e?void 0:e.wrapper)||void 0===le?void 0:le.classes)||void 0===te?void 0:te.root)},overrideClasses:{root:a(null===(ne=null===(re=null==e?void 0:e.wrapper)||void 0===re?void 0:re.overrideClasses)||void 0===ne?void 0:ne.root)}}}}function W(e){var o,l,t=s();return{atom:{color:a(e.color),data:(null===(o=e.row)||void 0===o?void 0:o.editable)?a(e.data.map((function(e){return a(e)}))):a(e.data),columns:a(e.columns.map((function(e){return a(e)}))),idProperty:a(null!==(l=e.idProperty)&&void 0!==l?l:"id"),header:B(e.header),sort:H(e.sort),row:S(e.row),cell:N(e.cell),pagination:z(e.pagination),classes:R(e.classes)},store:t}}function j(o){var l=o.store,t=o.children;return e.createElement(e.Fragment,null,e.createElement(i,{store:l},t))}export{j as TableProvider,W as createAtoms,x as default};
//# sourceMappingURL=index.js.map

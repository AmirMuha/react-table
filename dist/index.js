import e,{memo as t,useState as a,useMemo as o,useLayoutEffect as r}from"react";import{useAtom as n,atom as l}from"jotai";function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e?e.filter((function(e){return!!e})).join(" "):""}var c=function(){return c=Object.assign||function(e){for(var t,a=1,o=arguments.length;a<o;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},c.apply(this,arguments)};function m(e,t,a){if(a||2===arguments.length)for(var o,r=0,n=t.length;r<n;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var i=20;function d(e){void 0===e&&(e=0);for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e<=i-1?t[e]?t[e]:d.apply(void 0,m([e+1],t,!1)):void 0}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.apply(void 0,m([1],e,!1))}var _=t((function(t){var o=n(t.column)[0],r=n(t.row)[0],l=r[o.name],s=a(!1),c=s[0],m=s[1],i=a(l),d=i[0],u=i[1],_=t.atom.cell.onChange;return c?e.createElement("input",{type:"text",value:d,onChange:function(e){u(e.target.value)},onBlur:function(){_&&_({row:r,column:o},d),m(!1)}}):e.createElement("div",{onDoubleClick:function(){m(!0)}},l)}),(function(){return!0})),b=t((function(t){var a=n(t.row)[0],o=n(t.column)[0],r=n(t.atom.classes.cell.classes.root)[0],l=n(t.atom.classes.cell.overrideClasses.root)[0],c=a[o.name],m=t.atom.cell.onClick,i=t.atom.cell.onChange,d={value:c,row:a,column:o},b=o.render?o.render(d):c;return e.createElement("td",{className:u(l,s(r,"am_table__body--cell am_table__body__cell--root")),onClick:function(){m&&m(d)}},o.editable&&i?e.createElement(_,{atom:t.atom,columnIndex:t.columnIndex,rowIndex:t.rowIndex,column:t.column,row:t.row}):b)}),(function(){return!0})),h=t((function(t){var a=n(t.atom.columns)[0],r=n(t.atom.row.selection)[0],c=n(t.atom.row.editable)[0],m=n(t.atom.classes.row.classes.root)[0],i=n(t.atom.classes.row.overrideClasses.root)[0],d=o((function(){return c?t.row:l(t.row)}),[c]),_=n(d),h=_[0];_[1];var f=n(t.atom.idProperty)[0],v=n(t.atom.row.selected),p=v[0],y=v[1],w=h[f],C=r&&!!p[w],E=t.atom.row.onClick,g=function(){if(r){var e=Object.assign({},p);C?delete e[w]:e[w]=t.row,y(e)}};return e.createElement("tr",{className:u(i,s(m,r?"am_table__body__row--selectable":void 0,C?"am_table__body__row--selected":void 0,"am_table__body--row am_table__body__row--root")),onClick:function(){E&&E(h),r&&g()}},r?e.createElement("td",null,e.createElement("input",{type:"checkbox",checked:C,onChange:g})):null,a.map((function(a,o){return e.createElement(b,{key:"body_row_cell_".concat(o),atom:t.atom,row:l(h),column:a,columnIndex:o,rowIndex:t.index})})))}),(function(){return!0})),f=t((function(t){var a=n(t.atom.data)[0],o=n(t.atom.pagination.currentPage)[0],r=n(t.atom.pagination.itemsPerPage)[0],l=n(t.atom.classes.body.classes.root)[0],c=n(t.atom.classes.body.overrideClasses.root)[0],m=r&&0!==r?a.slice(((null!=o?o:0)-1)*r,(null!=o?o:0)*r):a;return e.createElement("tbody",{className:u(c,s(l,"am_table__body am_table__body--root"))},m.map((function(a,o){return e.createElement(h,{key:"body_row_".concat(o),index:o,row:a,atom:t.atom})})))}),(function(){return!0}));function v(t){var a=n(t.atom.classes.headerCell.classes.resizeHandle.root)[0],o=n(t.atom.classes.headerCell.overrideClasses.resizeHandle.root)[0];return e.createElement("span",{onDrag:function(e){console.log(e)},className:u(o,s(a,"am_table__header__cell--resize-handle am_table__header__cell__resize-handle--root"))})}var p=t((function(t){var a=function(e){var t=n(e.atom.classes.headerCell.classes.root)[0],a=n(e.atom.classes.headerCell.overrideClasses.root)[0],o=n(e.atom.classes.headerCell.classes.content.root)[0],r=n(e.atom.classes.headerCell.overrideClasses.content.root)[0],l=n(e.atom.classes.headerCell.classes.sortBtn.root)[0],s=n(e.atom.classes.headerCell.overrideClasses.sortBtn.root)[0];return{classes:{root:t,content:o,sortBtn:l},overrideClasses:{root:a,content:r,sortBtn:s}}}(t),o=a.classes,r=a.overrideClasses,l=n(t.column),m=l[0],i=l[1],d=n(t.atom.sort.defaultSortedColumn),_=d[0],b=d[1],h=n(t.atom.sort.defaultSortDirection),f=h[0],p=h[1],y=t.atom.header.cell.onClick;return e.createElement("th",{style:{width:m.flex?"100% !important":m.width,minWidth:m.width?m.width:m.minWidth,maxWidth:m.width?m.width:m.maxWidth},onClick:function(){y&&y(m,i)},className:u(r.root,s(o.root,"am_table__header--cell am_table__header__cell--root"))},e.createElement("div",{className:u(r.content,s(o.content,"am_table__header__cell--content"))},m.header),m.filterable?e.createElement(e.Fragment,null):null,_===m.name&&e.createElement("div",{onClick:function(e){e.stopPropagation(),_===m.name?p("asc"===f?"desc":"asc"):(b(m.name),p("asc"))},className:u(r.sortBtn,s(o.sortBtn,"am_table__header__cell--sort-btn"))},e.createElement("span",null,"asc"===f?"↑":"↓")),e.createElement(v,c({},t)))}),(function(){return!0})),y=t((function(t){var a=n(t.atom.columns)[0],o=n(t.atom.classes.header.classes.root)[0],r=n(t.atom.classes.header.overrideClasses.root)[0],l=n(t.atom.classes.headerRow.classes.root)[0],c=n(t.atom.classes.headerRow.overrideClasses.root)[0];return e.createElement("thead",{className:u(r,s(o,"am_table__header am_table__header--root"))},e.createElement("tr",{className:u(c,s(l,"am_table__header--row am_table__header__row--root"))},a.map((function(a,o){return e.createElement(p,{key:"header_cell_".concat(o),column:a,atom:t.atom,index:o})}))))}),(function(){return!0})),w=t((function(t){var a=n(t.atom.data)[0],o=n(t.atom.pagination.currentPage)[0],r=n(t.atom.pagination.itemsPerPage)[0],l=r&&0!==r?Math.ceil(a.length/r):1,s=1===o,c=1===o;return e.createElement("div",{className:"am_container__pagination"},e.createElement("button",{disabled:s},"قبل"),e.createElement("span",null,"صفحه ",o," از ",l),e.createElement("button",{disabled:c},"بعد"))}),(function(){return!0})),C={color:"--am__table-color",hover:"--am__table-hover-color",selected:"--am__table-selected-color",resizeHandle:"--am__table-resize-handle-color"};function E(e,t){if(e.startsWith("#")){e=e.slice(1);var a=parseInt(e.slice(0,2),16),o=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16);return"rgba(".concat(a,", ").concat(o,", ").concat(r,", ").concat(t,")")}if(e.startsWith("rgb(")){var n=e.match(/(\d+),\s*(\d+),\s*(\d+)\)/);if(n){a=parseInt(n[1],10),o=parseInt(n[2],10),r=parseInt(n[3],10);return"rgba(".concat(a,", ").concat(o,", ").concat(r,", ").concat(t,")")}return e}return e}function g(e){var t=e.atom,a=n(t.color)[0];r((function(){a&&function(e){document.body.style.setProperty(C.color,e),document.body.style.setProperty(C.hover,E(e,.15)),document.body.style.setProperty(C.selected,E(e,.4)),document.body.style.setProperty(C.resizeHandle,"white")}(a)}),[a])}var x=t((function(t){var a=t.atom,o=n(a.classes.table.classes.root)[0],r=n(a.classes.table.overrideClasses.root)[0],l=n(a.classes.container.classes.root)[0],c=n(a.classes.container.overrideClasses.root)[0],m=n(a.classes.wrapper.classes.root)[0],i=n(a.classes.wrapper.overrideClasses.root)[0],d=n(a.pagination.enabled)[0];return g({atom:a}),e.createElement("div",{className:u(c,s(l,"am_table__container"))},e.createElement("div",{className:u(i,s(m,"am_table__wrapper"))},e.createElement("table",{className:u(r,s(o,"am_table__table"))},e.createElement(y,{atom:a}),e.createElement(f,{atom:a}))),d?e.createElement(w,{atom:a}):null)}),(function(){return!0}));export{x as AmirMuhaTable};
//# sourceMappingURL=index.js.map
